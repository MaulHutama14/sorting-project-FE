!function(t){if("object"==typeof module&&"object"==typeof module.exports){var e=t(require,exports);void 0!==e&&(module.exports=e)}else"function"==typeof define&&define.amd&&define(["require","exports","@angular/core","./daypilot-core"],t)}(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@angular/core"),e=require("./daypilot-core");exports.DayPilot=e.DayPilot;var n=function(){return 65536*(1+Math.random())|0},i=function(t){return JSON.stringify(t)},o=function(){var t={"hashes":{}};this.diff=function(e){var n={},i={};e=e||[];for(var o=0;o<e.length;o++){var s=e[o],r=s.id;if(!r)throw"The 'id' property must be specified for event data object";if(i.hasOwnProperty(""+r))throw"Duplicate event IDs are not allowed, id: "+r;i[""+r]=JSON.stringify(s)}return n.add=e.filter(function(e){return!t.hashes.hasOwnProperty(e.id)}),n.remove=Object.getOwnPropertyNames(t.hashes).filter(function(t){return!i.hasOwnProperty(t)}).map(function(e){return JSON.parse(t.hashes[e]).id}),n.modify=e.filter(function(e){return t.hashes.hasOwnProperty(e.id)&&t.hashes[e.id]!==i[e.id]}),n.changeCount=n.add.length+n.modify.length+n.remove.length,t.hashes=i,n}},s=function(){function s(){this.a=!1,this.b=!1,this.c=new o,this.d={"start":null,"end":null},this.e=!1,this.f="dp_"+(new Date).getTime()+n(),this.viewChange=new t.EventEmitter}return Object.defineProperty(s.prototype,"events",{get:function(){return this.g},set:function(t){this.e=!0,this.g=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"id",{get:function(){return this.f},enumerable:!0,configurable:!0}),s.prototype.ngOnInit=function(){},s.prototype.ngOnDestroy=function(){this.dispose()},s.prototype.ngAfterViewInit=function(){this.control=new e.DayPilot.Scheduler(this.id),this.control.internal.enableAngular2(),this.updateOptions(),this.a=!1,this.control.init()},s.prototype.ngDoCheck=function(){if(this.control){this.updateOptions(),this.updateEvents();var t=this.control;if(this.a&&(this.control.update(),t.internal.postInit(),this.a=!1),this.b){this.b=!1;var e={};e.visibleRangeChanged=this.d.start!==this.control.visibleStart()||this.d.end!==this.control.visibleEnd(),this.d.start=this.control.visibleStart(),this.d.end=this.control.visibleEnd(),this.viewChange.emit(e)}}},s.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},s.prototype.updateOptions=function(){var t=i(this.config);if(t!==this.h){var e=this.control;e.internal.skipUpdate()?e.internal.skipped():(e.internal.loadOptions(this.config),this.a=!0,this.b=!0)}this.h=t},s.prototype.updateEvents=function(){if(this.e){var t=this.c.diff(this.events),n=this.control;if(n.internal.skipUpdate())return void n.internal.skipped();this.events&&0===this.events.length&&n.events.list&&0===n.events.list.length||0===t.changeCount&&this.events===n.events.list||(t.changeCount<10&&this.events===n.events.list?(t.add.forEach(function(t){n.events.add(new e.DayPilot.Event(t))}),t.modify.forEach(function(t){n.events.update(new e.DayPilot.Event(t))}),t.remove.forEach(function(t){var e=n.events.find(t);e&&n.events.remove(e)}),n.events.immediateRefresh(),n.events.list=this.events):(n.events.list=this.events,this.a=!0))}},s}();s.decorators=[{type:t.Component,args:[{selector:"daypilot-scheduler",template:"<div id='{{id}}'></div>",styles:[""]}]}],s.ctorParameters=function(){return[]},s.propDecorators={"viewChange":[{type:t.Output}],"config":[{type:t.Input}],"events":[{type:t.Input}]},exports.DayPilotSchedulerComponent=s;var r=function(){function o(){this.a=!1,this.b=!1,this.f="dp_"+(new Date).getTime()+n(),this.viewChange=new t.EventEmitter}return Object.defineProperty(o.prototype,"id",{get:function(){return this.f},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){},o.prototype.ngOnDestroy=function(){this.dispose()},o.prototype.ngAfterViewInit=function(){this.dispose();var t=new e.DayPilot.Calendar(this.id);this.control=t,this.updateOptions(),t.init()},o.prototype.ngDoCheck=function(){if(this.control&&(this.updateOptions(),this.updateEvents(),this.a&&(this.control.update(),this.a=!1),this.b)){this.b=!1;var t={};this.viewChange.emit(t)}},o.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},o.prototype.updateOptions=function(){var t=i(this.config);if(t!==this.h){var e=this.control;for(var n in this.config)e[n]=this.config[n];this.a=!0,this.b=!0}this.h=t},o.prototype.updateEvents=function(){var t=i(this.events);if(t!==this.i){this.control.events.list=this.events,this.a=!0}this.i=t},o}();r.decorators=[{type:t.Component,args:[{selector:"daypilot-calendar",template:"<div id='{{id}}'></div>",styles:[""]}]}],r.ctorParameters=function(){return[]},r.propDecorators={"viewChange":[{type:t.Output}],"events":[{type:t.Input}],"config":[{type:t.Input}]},exports.DayPilotCalendarComponent=r;var a=function(){function t(){this.a=!1,this.f="dp_"+(new Date).getTime()+n()}return Object.defineProperty(t.prototype,"id",{get:function(){return this.f},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.ngAfterViewInit=function(){this.dispose();var t=new e.DayPilot.Gantt(this.id);t.init(),this.control=t},t.prototype.ngDoCheck=function(){this.control&&(this.updateOptions(),this.a&&(this.control.update(),this.a=!1))},t.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},t.prototype.updateOptions=function(){var t=i(this.config);if(t!==this.h){this.control.internal.loadOptions(this.config),this.a=!0}this.h=t},t}();a.decorators=[{type:t.Component,args:[{selector:"daypilot-gantt",template:"<div id='{{id}}'></div>",styles:[""]}]}],a.ctorParameters=function(){return[]},a.propDecorators={"config":[{type:t.Input}]},exports.DayPilotGanttComponent=a;var p=function(){function t(){this.a=!1,this.f="dp_"+(new Date).getTime()+n()}return Object.defineProperty(t.prototype,"id",{get:function(){return this.f},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.ngAfterViewInit=function(){this.dispose();var t=new e.DayPilot.Month(this.id);t.init(),this.control=t},t.prototype.ngDoCheck=function(){this.control&&(this.updateOptions(),this.updateEvents(),this.a&&(this.control.update(),this.a=!1))},t.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},t.prototype.updateOptions=function(){var t=i(this.config);if(t!==this.h){var e=this.control;for(var n in this.config)e[n]=this.config[n];this.a=!0}this.h=t},t.prototype.updateEvents=function(){var t=i(this.events);if(t!==this.i){this.control.events.list=this.events,this.a=!0}this.i=t},t}();p.decorators=[{type:t.Component,args:[{selector:"daypilot-month",template:"<div id='{{id}}'></div>",styles:[""]}]}],p.ctorParameters=function(){return[]},p.propDecorators={"events":[{type:t.Input}],"config":[{type:t.Input}]},exports.DayPilotMonthComponent=p;var h=function(){function t(){this.a=!1,this.f="dp_"+(new Date).getTime()+n()}return Object.defineProperty(t.prototype,"id",{get:function(){return this.f},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.ngAfterViewInit=function(){this.dispose();var t=new e.DayPilot.Kanban(this.id);t.init(),this.control=t},t.prototype.ngDoCheck=function(){this.control&&(this.updateOptions(),this.a&&(this.control.update(),this.a=!1))},t.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},t.prototype.updateOptions=function(){var t=i(this.config);if(t!==this.h){this.control.internal.loadOptions(this.config),this.a=!0}this.h=t},t}();h.decorators=[{type:t.Component,args:[{selector:"daypilot-kanban",template:"<div id='{{id}}'></div>",styles:[""]}]}],h.ctorParameters=function(){return[]},h.propDecorators={"config":[{type:t.Input}]},exports.DayPilotKanbanComponent=h;var c=function(){function o(){this.a=!1,this.j=null,this.date=e.DayPilot.Date.today(),this.dateChange=new t.EventEmitter,this.f="dp_"+(new Date).getTime()+n()}return Object.defineProperty(o.prototype,"id",{get:function(){return this.f},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){},o.prototype.ngOnDestroy=function(){this.dispose()},o.prototype.ngAfterViewInit=function(){this.dispose();var t=new e.DayPilot.Navigator(this.id);this.control=t;var n=this;this.updateOptions(),t.onTimeRangeSelected=function(i){var o=n.date||e.DayPilot.Date.today();i.day!==new e.DayPilot.Date(o)&&n.dateChange.emit(i.day),n.j&&n.j.call(t,i)},t.init(),t.selectionDay!==e.DayPilot.Date.today()&&n.dateChange.emit(t.selectionDay)},o.prototype.ngDoCheck=function(){this.control&&(this.updateOptions(),this.updateEvents(),this.a&&(this.control.update(),this.a=!1))},o.prototype.dispose=function(){this.control&&(this.control.dispose(),this.control=null)},o.prototype.updateOptions=function(){var t=this.control,n=i(this.config),o=this.date||e.DayPilot.Date.today(),s=i(new e.DayPilot.Date(o));if(n!==this.h){for(var r in this.config)"onTimeRangeSelected"===r?this.j=this.config.onTimeRangeSelected:t[r]=this.config[r];this.a=!0}else"undefined"!=typeof this.date&&s!==this.k&&(t.select(this.date),this.k=s,this.a=!0);this.h=n},o.prototype.updateEvents=function(){var t=i(this.events);if(t!==this.i){this.control.events.list=this.events,this.a=!0}this.i=t},o}();c.decorators=[{type:t.Component,args:[{selector:"daypilot-navigator",template:"<div id='{{id}}'></div>",styles:[""]}]}],c.ctorParameters=function(){return[]},c.propDecorators={"date":[{type:t.Input}],"events":[{type:t.Input}],"config":[{type:t.Input}],"dateChange":[{type:t.Output}]},exports.DayPilotNavigatorComponent=c;var l=function(){function e(e){this.element=e,this.autoFocus=!0,this.close=new t.EventEmitter,this.l="hidden"}return Object.defineProperty(e.prototype,"visible",{get:function(){return"visible"===this.l},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.show=function(){this.l="visible";var t=this.element.nativeElement;this.autoFocus&&setTimeout(function(){var e=t.querySelector("input");e&&e.focus()})},e.prototype.hide=function(t){this.l="hidden",this.close.emit({"result":t})},e}();l.decorators=[{type:t.Component,args:[{selector:"daypilot-modal",styles:["\n  .modal {\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    right: 0px;\n    max-height: 80%;\n    overflow-y: auto;\n    padding: 20px;\n    background-color: white;\n\n    transform: translateY(-100%);\n  }\n  .modal.visible {\n    transform: translateY(0);\n  }\n\n  .overlay {\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    right: 0px;\n    bottom: 0px;\n    background-color: #000;\n\n    opacity: 0;\n    margin-left: 100%;\n  }\n  .overlay.visible {\n    margin-left: 0;\n    opacity: 0.3;\n  }\n  .modal {\n    transition: transform 0.3s cubic-bezier(0, 0, 0.3, 1);\n  }\n  .overlay {\n    transition: margin-left 0s linear 0.3s, opacity 0.3s;\n  }\n  .overlay.visible {\n    transition: margin-left 0s, opacity 0.3s;\n  }\n  "],template:'\n  <div\n      class="overlay"\n      (click)="hide()"\n      [class.visible]="visible"\n      ></div>\n  <div\n      class="modal"\n      [class.visible]="visible"\n      >\n    <ng-content></ng-content>\n  </div>'}]}],l.ctorParameters=function(){return[{type:t.ElementRef,decorators:[{type:t.Inject,args:[t.ElementRef]}]}]},l.propDecorators={"autoFocus":[{type:t.Input}],"close":[{type:t.Output}]},exports.DayPilotModalComponent=l;var u=[s,r,p,c,a,h,l],d=function(){function t(){}return t}();d.decorators=[{type:t.NgModule,args:[{declarations:[u],exports:[u]}]}],d.ctorParameters=function(){return[]},exports.DayPilotModule=d});